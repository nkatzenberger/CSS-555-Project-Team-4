<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" href="./public/css/styles.css"> 
    <link type="text/css" href="brainbrowser/examples/css/ui-darkness/jquery-ui-1.8.10.custom.css" rel="Stylesheet" />
    <link type="text/css" href="brainbrowser/examples/css/common.css" rel="Stylesheet" />
    <link type="text/css" href="brainbrowser/examples/css/surface-viewer-demo.css" rel="Stylesheet" />

    <!-- all the scripts -->
    <script src="brainbrowser\examples\js/jquery-1.6.4.min.js"></script>
    <script src="brainbrowser\examples\js/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="brainbrowser\examples\js/ui.js"></script>
    <script src="brainbrowser\examples\js/pako.js"></script>
    <script src="brainbrowser\src\brainbrowser/brainbrowser.js"></script>
    <script src="brainbrowser\src\brainbrowser\core/tree-store.js"></script>
    <script src="brainbrowser\src\brainbrowser\lib/config.js"></script>
    <script src="brainbrowser\src\brainbrowser\lib/utils.js"></script>
    <script src="brainbrowser\src\brainbrowser\lib/events.js"></script>
    <script src="brainbrowser\src\brainbrowser\lib/loader.js"></script>
    <script src="brainbrowser\src\brainbrowser\lib/color-map.js"></script>
    <script src="brainbrowser\src\brainbrowser/surface-viewer.js"></script>
    <script src="brainbrowser\src\brainbrowser\surface-viewer\lib/three.js"></script>
    <script src="brainbrowser\src\brainbrowser\surface-viewer\lib/parse-intensity-data.js"></script>
    <script src="brainbrowser\src\brainbrowser\surface-viewer\modules/annotations.js"></script>
    <script src="brainbrowser\src\brainbrowser\surface-viewer\modules/color.js"></script>
    <script src="brainbrowser\src\brainbrowser\surface-viewer\modules/loading.js"></script>
    <script src="brainbrowser\src\brainbrowser\surface-viewer\modules/rendering.js"></script>
    <script src="brainbrowser\src\brainbrowser\surface-viewer\modules/views.js"></script>
    <script type="module" src="firebase.js"></script>

    <title>EEG Seizure Detection</title>
  </head>
  <body>

    <!-- top head/navigation bar-->
    <div id ="top-bar">
      <h1>EEG Seizure Detection</h1>
    </div>


    <!-- Buttons to load example color maps-->
    <div id="left-panel">
        <button id="load-ex1" class="hover-effect">Load Computed</button>
        <button id="load-ex2" class="hover-effect">Load Example</button>
        <div class="dropdown-menu">
          <button class="drop hover-effect">Display Selection &#709;</button>
          <div class="drop-content">
            <button id="drop-ex1" class="hover-effect">Blue</button>
            <button id="drop-ex2" class="hover-effect">Green</button>
            <button id="drop-ex3" class="hover-effect">Gray Scale</button>
            <button id="drop-ex4" class="hover-effect">Spectral</button>
            <button id="drop-ex5" class="hover-effect">Thermal</button>
          </div>
          </div>
          <div>
            <h3>Upload Patient Data</h3>
            <input type="file" id="up" class="hover-effect" accept=".mat">
            <div style="display: flex; justify-content: center; align-items: center;">
              <button id="submitBtn" class="hover-effect">Submit</button>
              <!-- Loading Circle -->
              <div id="loading" style="display:none;">
                <div class="loader"></div>
              </div>
            </div>
            <!-- Status Message -->
            <div id="uploadStatus"></div>
          </div>
          <div id="response" style="display:none"></div>
    </div>
    <!--import function for uploading file-->
    <script src="./src/js/upload.js"></script>
    <!--call upload file script when clicking submit button-->
    <script>
      document.getElementById("submitBtn").addEventListener("click", function() {
        uploadFile();
      });
    </script>
  <div id="right-panel">
    <a href="signup.html">
      <button>Sign Up</button>
  </a>
  <button id = "signOut-btn">Sign Out</button>
    <div id="login">
      <div id="current-login">
        Sign in to view uploaded files:
      </div>
      <div id="right-input-fields">

        <form>
          <input type="email" id="username" name="username" placeholder="Email">
          <input type="password" id="password" name="password" placeholder="Password">
        </form>

        <div id="Login-errs"></div>
        <script> 
        document.getElementById("Login-errs").style.display = "none";
        </script>

      </div>
      <button id="login-btn">Log In</button>
    </div>
    <div id="filelist-header">Registered Files:
      <button id="refresh-files" styles="float:right">Refresh</button>
    </div>
    <div id="filelist">
    </div>
  </div>
  <!--get files list function-->
  <script type="module" src="src/js/getFiles.js"></script>
  <script type="module" src="src/js/Login.js"></script>
  <script type ="module" src ="src/js/signout.js"></script>
  <!--Use getFiles function to get a list and iterate over it to populate file list-->
  <script type="module">
    import getFiles from './src/js/getFiles.js';
    document.getElementById("refresh-files").addEventListener("click", function() {
      //getFiles() is a promise so needs to be handled asyncronously using '.then'
      getFiles("DefaultUser")
        .then(fileList => {
            // Clear the contents of the filelist div
            const container = document.getElementById("filelist");
            container.innerHTML = "";

            // Iterate over the fileList and populate the file list
            fileList.forEach(currentFile => {
                const fileDiv = document.createElement('div');
                fileDiv.classList.add("file");
                fileDiv.textContent = currentFile;
                container.appendChild(fileDiv);
            });
        })
        .catch(error => {
            // Handle any errors
            console.error('Error fetching files:', error);
        });
    });

    
  </script>

    <!-- Brain Browser Display-->
  <div id="content-container"> 
    <div id="display" style="width:800px;height:800px;">
      <div class="loadin" id="display-transition">
        <div id="brainbrowser">
        </div>
      </div>  
    </div>

    <footer>
      <div class="footer-content">
        <div class="company-name">F&S Digital, LLC</div>
        <div class="contact-info">
          <p>(800)-262-5108</p>
          <p>hello@differnt.com</p>
        </div>
      </div>
    </footer>
  </div>
  
    <!-- animations-->
    <script>

      function fadeAnimation(elementID){
        document.getElementById(elementID).addEventListener("click", function() {

        //fade animation
        var fadeTarget = document.getElementById("display-transition")
        fadeTarget.classList.add("fade");

        // Wait until the animation is over and then remove the class
        setTimeout(function(){fadeTarget.classList.remove("fade");}, 1000);
        });

      }
        //remove initial brain-browser-window animation
        setTimeout(function(){document.getElementById('display-transition').classList.remove("loadin");},3000);

        //buttons make brain fade out then in while new data is loaded
        fadeAnimation("load-ex1");
        fadeAnimation("load-ex2");

        fadeAnimation("drop-ex1");
        fadeAnimation("drop-ex2");
        fadeAnimation("drop-ex3");
        fadeAnimation("drop-ex4");
        fadeAnimation("drop-ex5");

        //dropdown menus set visibility
        var dropdown = document.getElementsByClassName("dropdown-menu");
        for(var i = 0;i<dropdown.length;i++){

          dropdown[i].addEventListener("mouseover",function() {
            var content = this.querySelector(".drop-content");
            content.style.display = "block";
            content.style.animation = "dropdown-slide 1s";
            content.style.maxHeight = content.scrollHeight + "px";
          });

          dropdown[i].addEventListener("mouseout",function() {
            var content = this.querySelector(".drop-content");
            content.style.display = "none";
            content.style.animation = "dropdown-slide 1s reverse";
            content.style.maxHeight = "0";
          });
        }
    </script>

    <!-- Brain Browser Initalization Script -->
    <script>
          BrainBrowser.config.set("worker_dir","brainbrowser/src/brainbrowser/workers");
          BrainBrowser.SurfaceViewer.start("brainbrowser", function(viewer) {
              viewer.render();
              viewer.loadModelFromURL("src/brain-surface.obj")


              // Load Example 1 Button Event Listener
              document.getElementById("load-ex1").addEventListener("click", function() {
                  viewer.loadColorMapFromURL("./data/unzippedExamples/colormaps/thermal.txt");
                  viewer.loadIntensityDataFromURL("./data/converted.txt");
              });


              // Load Example 2 Button Event Listener
              document.getElementById("load-ex2").addEventListener("click", function() {
                  viewer.loadColorMapFromURL("./data/unzippedExamples/colormaps/spectral.txt");
                  viewer.loadIntensityDataFromURL("./data/unzippedExamples/intensity/atlas-values.txt")
              });

              document.getElementById("drop-ex1").addEventListener("click", function() {
                  viewer.loadColorMapFromURL("./data/unzippedExamples/colormaps/blue.txt");
              });

              document.getElementById("drop-ex2").addEventListener("click", function() {
                  viewer.loadColorMapFromURL("./data/unzippedExamples/colormaps/green.txt");
              });

              document.getElementById("drop-ex3").addEventListener("click", function() {
                  viewer.loadColorMapFromURL("./data/unzippedExamples/colormaps/gray-scale.txt");
              });

              document.getElementById("drop-ex4").addEventListener("click", function() {
                  viewer.loadColorMapFromURL("./data/unzippedExamples/colormaps/spectral.txt");
              });

              document.getElementById("drop-ex5").addEventListener("click", function() {
                  viewer.loadColorMapFromURL("./data/unzippedExamples/colormaps/thermal.txt");
              });

              // Set the background color.
              viewer.setClearColor(0x062320);
          });
    </script>

    <!-- <script type="module" src ="index.js"></script> -->
    <!--<script src = "submit.js"> </script> -->
  </body>
</html>



